<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>llinqu Dashboard - Choose Language</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        'primary-dark': '#4B4BC8',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .text-gradient {
            background: linear-gradient(135deg, #5D5CDE 0%, #7C3AED 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .language-card {
            transition: all 0.3s ease;
            min-width: 160px;
        }

        .language-card:hover {
            transform: translateY(-2px);
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white transition-colors duration-300">
    <div class="flex h-screen">
        <!-- Left Sidebar -->
        <aside class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">L</span>
                    </div>
                    <span class="text-xl font-bold">llinqu</span>
                </div>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Code Minifier Dashboard</p>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="#"
                            class="flex items-center px-4 py-3 text-primary bg-primary/10 rounded-lg font-medium">
                            <i class="fas fa-code mr-3"></i>
                            Languages
                        </a>
                    </li>
                    <li>
                        <a href="#"
                            class="flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:text-primary hover:bg-primary/5 rounded-lg transition-colors">
                            <i class="fas fa-history mr-3"></i>
                            History
                        </a>
                    </li>
                    <li>
                        <a href="#"
                            class="flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:text-primary hover:bg-primary/5 rounded-lg transition-colors">
                            <i class="fas fa-chart-bar mr-3"></i>
                            Analytics
                        </a>
                    </li>
                    <li>
                        <a href="#"
                            class="flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:text-primary hover:bg-primary/5 rounded-lg transition-colors">
                            <i class="fas fa-cog mr-3"></i>
                            Settings
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Theme Toggle -->
            <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Theme</label>
                    <div class="flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
                        <button id="theme-light" class="flex-1 px-2 py-1 rounded-md text-xs font-medium transition-colors theme-btn" data-theme="light">
                            <i class="fas fa-sun"></i>
                        </button>
                        <button id="theme-dark" class="flex-1 px-2 py-1 rounded-md text-xs font-medium transition-colors theme-btn" data-theme="dark">
                            <i class="fas fa-moon"></i>
                        </button>
                        <button id="theme-auto" class="flex-1 px-2 py-1 rounded-md text-xs font-medium transition-colors theme-btn" data-theme="auto">
                            <i class="fas fa-desktop"></i>
                        </button>
                    </div>
                </div>

                <a href="../"
                    class="flex items-center justify-center w-full px-4 py-2 text-sm text-gray-500 hover:text-primary border border-gray-300 dark:border-gray-600 rounded-lg transition-colors">
                    <i class="fas fa-home mr-2"></i>Home
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-hidden">
            <!-- Top Header -->
            <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold">
                            Choose Your <span class="text-gradient">Language</span>
                        </h1>
                        <p class="text-gray-600 dark:text-gray-400 mt-1">
                            Select a programming language to start minifying your code
                        </p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-500 dark:text-gray-400">Total Languages</p>
                        <p class="text-2xl font-bold text-primary" id="total-languages">10</p>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="p-6 h-full overflow-y-auto">
                <!-- Languages Horizontal Scroll -->
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-semibold flex items-center">
                            <i class="fas fa-code mr-2 text-primary"></i>
                            All Languages
                        </h2>
                        <div class="flex space-x-2">
                            <button id="scroll-left" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button id="scroll-right" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <div id="languages-container" class="overflow-x-auto scrollbar-hide">
                        <div class="flex space-x-4 pb-4" id="languages-scroll">
                            <!-- Languages will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Recently Used -->
                <div class="mb-8" id="recently-used-section" style="display: none;">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-clock mr-2 text-primary"></i>
                        Recently Used
                    </h2>
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-[20px]" id="recently-used-grid">
                            <!-- Recently used languages will be populated here -->
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-center">
                            <button id="clear-recent" class="text-sm text-red-500 hover:text-red-600 transition-colors">
                                <i class="fas fa-trash mr-1"></i>
                                Clear Recent History
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mr-4">
                                <i class="fas fa-bolt text-primary text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900 dark:text-white">Lightning Fast</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Process in nano-seconds</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mr-4">
                                <i class="fas fa-check-circle text-primary text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900 dark:text-white">100% Reliable</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Preserves functionality</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center mr-4">
                                <i class="fas fa-lock text-primary text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900 dark:text-white">Secure & Private</h3>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Local processing only</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Language data with enhanced information
        const languages = {
            universal: { 
                name: 'Universal', 
                icon: 'fas fa-globe', 
                color: 'gray', 
                extension: '.*',
                description: 'Basic minify for any file type'
            },
            javascript: { 
                name: 'JavaScript', 
                icon: 'fab fa-js-square', 
                color: 'yellow', 
                extension: '.js',
                description: 'Optimize JS code and variables'
            },
            css: { 
                name: 'CSS', 
                icon: 'fab fa-css3-alt', 
                color: 'blue', 
                extension: '.css',
                description: 'Compress stylesheets'
            },
            html: { 
                name: 'HTML', 
                icon: 'fab fa-html5', 
                color: 'orange', 
                extension: '.html',
                description: 'Optimize markup structure'
            },
            json: { 
                name: 'JSON', 
                icon: 'fas fa-brackets-curly', 
                color: 'green', 
                extension: '.json',
                description: 'Compress JSON data'
            },
            xml: { 
                name: 'XML', 
                icon: 'fas fa-code', 
                color: 'purple', 
                extension: '.xml',
                description: 'Minimize XML documents'
            },
            sql: { 
                name: 'SQL', 
                icon: 'fas fa-database', 
                color: 'indigo', 
                extension: '.sql',
                description: 'Optimize database queries'
            },
            php: { 
                name: 'PHP', 
                icon: 'fab fa-php', 
                color: 'violet', 
                extension: '.php',
                description: 'Minify PHP server code'
            },
            python: { 
                name: 'Python', 
                icon: 'fab fa-python', 
                color: 'yellow', 
                extension: '.py',
                description: 'Optimize Python scripts'
            }
        };

        // Theme Management
        class ThemeManager {
            constructor() {
                this.currentTheme = localStorage.getItem('llinqu-theme') || 'auto';
                this.init();
            }

            init() {
                this.updateTheme();
                this.updateThemeButtons();
                this.attachEventListeners();
                
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
                    if (this.currentTheme === 'auto') {
                        this.updateTheme();
                    }
                });
            }

            setTheme(theme) {
                this.currentTheme = theme;
                localStorage.setItem('llinqu-theme', theme);
                this.updateTheme();
                this.updateThemeButtons();
            }

            updateTheme() {
                const html = document.documentElement;
                
                if (this.currentTheme === 'dark') {
                    html.classList.add('dark');
                } else if (this.currentTheme === 'light') {
                    html.classList.remove('dark');
                } else {
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    if (prefersDark) {
                        html.classList.add('dark');
                    } else {
                        html.classList.remove('dark');
                    }
                }
            }

            updateThemeButtons() {
                document.querySelectorAll('.theme-btn').forEach(btn => {
                    btn.classList.remove('bg-primary', 'text-white');
                    btn.classList.add('text-gray-600', 'dark:text-gray-400');
                });
                
                const activeBtn = document.querySelector(`[data-theme="${this.currentTheme}"]`);
                if (activeBtn) {
                    activeBtn.classList.remove('text-gray-600', 'dark:text-gray-400');
                    activeBtn.classList.add('bg-primary', 'text-white');
                }
            }

            attachEventListeners() {
                document.querySelectorAll('.theme-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.setTheme(btn.dataset.theme);
                    });
                });
            }
        }

        // Recently Used Manager
        class RecentlyUsedManager {
            constructor() {
                this.maxItems = 5;
                this.storageKey = 'llinqu-recent-languages';
                this.recentLanguages = this.loadFromStorage();
            }

            loadFromStorage() {
                try {
                    const stored = localStorage.getItem(this.storageKey);
                    return stored ? JSON.parse(stored) : [];
                } catch (e) {
                    return [];
                }
            }

            saveToStorage() {
                try {
                    localStorage.setItem(this.storageKey, JSON.stringify(this.recentLanguages));
                } catch (e) {
                    console.warn('Failed to save recent languages to localStorage');
                }
            }

            addLanguage(languageKey) {
                const timestamp = Date.now();
                
                // Remove if already exists
                this.recentLanguages = this.recentLanguages.filter(item => item.language !== languageKey);
                
                // Add to beginning with timestamp
                this.recentLanguages.unshift({
                    language: languageKey,
                    timestamp: timestamp,
                    count: (this.recentLanguages.find(item => item.language === languageKey)?.count || 0) + 1
                });
                
                // Keep only max items
                if (this.recentLanguages.length > this.maxItems) {
                    this.recentLanguages = this.recentLanguages.slice(0, this.maxItems);
                }
                
                this.saveToStorage();
                this.updateRecentlyUsedDisplay();
            }

            clearRecent() {
                this.recentLanguages = [];
                this.saveToStorage();
                this.updateRecentlyUsedDisplay();
            }

            formatTimeAgo(timestamp) {
                const now = Date.now();
                const diff = now - timestamp;
                const minutes = Math.floor(diff / 60000);
                const hours = Math.floor(diff / 3600000);
                const days = Math.floor(diff / 86400000);
                
                if (days > 0) return `${days}d ago`;
                if (hours > 0) return `${hours}h ago`;
                if (minutes > 0) return `${minutes}m ago`;
                return 'Just now';
            }

            updateRecentlyUsedDisplay() {
                const section = document.getElementById('recently-used-section');
                const grid = document.getElementById('recently-used-grid');
                
                if (this.recentLanguages.length === 0) {
                    section.style.display = 'none';
                    return;
                }
                
                section.style.display = 'block';
                grid.innerHTML = this.recentLanguages.map(item => {
                    const lang = languages[item.language];
                    if (!lang) return '';
                    
                    return `
                        <button class="language-card bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:shadow-md border border-gray-200 dark:border-gray-600 text-left transition-all" data-language="${item.language}">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-${lang.color}-100 dark:bg-${lang.color}-900/30 rounded-lg flex items-center justify-center mr-3">
                                    <i class="${lang.icon} text-${lang.color}-600 text-lg"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900 dark:text-white text-sm">${lang.name}</h3>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">${lang.extension}</p>
                                </div>
                            </div>
                            <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                                <span>Used ${item.count}x</span>
                                <span>${this.formatTimeAgo(item.timestamp)}</span>
                            </div>
                        </button>
                    `;
                }).join('');
            }
        }

        // Languages Display Manager
        class LanguagesManager {
            constructor(recentManager) {
                this.recentManager = recentManager;
                this.init();
            }

            init() {
                this.renderLanguages();
                this.attachScrollHandlers();
                this.attachLanguageClickHandlers();
                
                // Clear recent button
                document.getElementById('clear-recent').addEventListener('click', () => {
                    this.recentManager.clearRecent();
                });
            }

            renderLanguages() {
                const container = document.getElementById('languages-scroll');
                
                container.innerHTML = Object.entries(languages).map(([key, lang]) => `
                    <button class="language-card bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md hover:shadow-lg border border-gray-200 dark:border-gray-700 text-left" data-language="${key}">
                        <div class="flex flex-col items-center text-center">
                            <div class="w-16 h-16 bg-${lang.color}-100 dark:bg-${lang.color}-900/30 rounded-lg flex items-center justify-center mb-4">
                                <i class="${lang.icon} text-${lang.color}-600 text-2xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">${lang.name}</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mb-2">${lang.extension}</p>
                            <p class="text-xs text-gray-400 dark:text-gray-500 text-center leading-tight">${lang.description}</p>
                        </div>
                    </button>
                `).join('');
                
                // Update total count
                document.getElementById('total-languages').textContent = Object.keys(languages).length;
            }

            attachScrollHandlers() {
                const container = document.getElementById('languages-container');
                const scrollLeft = document.getElementById('scroll-left');
                const scrollRight = document.getElementById('scroll-right');
                
                scrollLeft.addEventListener('click', () => {
                    container.scrollBy({ left: -200, behavior: 'smooth' });
                });
                
                scrollRight.addEventListener('click', () => {
                    container.scrollBy({ left: 200, behavior: 'smooth' });
                });
            }

            attachLanguageClickHandlers() {
                document.addEventListener('click', (e) => {
                    const languageBtn = e.target.closest('[data-language]');
                    if (languageBtn) {
                        const language = languageBtn.dataset.language;
                        this.recentManager.addLanguage(language);
                        this.navigateToMinifier(language);
                    }
                });
            }

            navigateToMinifier(language) {
                // Add loading state
                const clickedBtn = document.querySelector(`[data-language="${language}"]`);
                const originalContent = clickedBtn.innerHTML;
                
                // Simulate navigation delay
                setTimeout(() => {
                    window.location.href = `minify.html?l=${language}`;
                }, 100);
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const themeManager = new ThemeManager();
            const recentManager = new RecentlyUsedManager();
            const languagesManager = new LanguagesManager(recentManager);
            
            // Initial display update
            recentManager.updateRecentlyUsedDisplay();
        });
    </script>
</body>

</html>
